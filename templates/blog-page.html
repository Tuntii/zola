{% extends "base.html" %}

{% block data_page %}
{% if page.path is starting_with("/projects") %}projects
{% elif page.path is starting_with("/poetry") %}poetry
{% elif page.path is starting_with("/thoughts") %}thoughts
{% else %}blog{% endif %}
{% endblock data_page %}

{% block content %}
<section class="page blog-post-page">
  <div class="page-content">
    <div class="hero">
      <h1 class="hero-title">
        <span class="title-line">
          <span class="title-word gradient-text">{{ page.title }}</span>
        </span>
      </h1>
      <div class="hero-meta">
        <span>{{ page.date }}</span>
        {% if page.reading_time %}
        <span class="separator">•</span>
        <span>{{ page.reading_time }} dk okuma</span>
        {% endif %}
        {% if page.taxonomies.tags %}
        <span class="separator">•</span>
        <span class="tags">
          {% for tag in page.taxonomies.tags %}
          <a href="{{ get_taxonomy_url(kind="tags", name=tag) }}" class="tag">#{{ tag }}</a>
          {% endfor %}
        </span>
        {% endif %}
      </div>
    </div>

    <div class="tiptap-content">
      
      {% if page.toc %}
      <div class="toc">
        <h3 class="toc-title">İçindekiler</h3>
        <ul class="toc-list">
        {% for h1 in page.toc %}
          <li>
            <a href="{{ h1.permalink | safe }}">{{ h1.title }}</a>
            {% if h1.children %}
            <ul>
              {% for h2 in h1.children %}
              <li>
                <a href="{{ h2.permalink | safe }}">{{ h2.title }}</a>
              </li>
              {% endfor %}
            </ul>
            {% endif %}
          </li>
        {% endfor %}
        </ul>
      </div>
      {% endif %}

      {{ page.content | safe }}

      <div class="share-buttons">
        <span class="share-label">Paylaş:</span>
        <a href="https://twitter.com/intent/tweet?text={{ page.title }}&url={{ current_url }}" target="_blank" rel="noopener noreferrer">Twitter</a>
        <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ current_url }}&title={{ page.title }}" target="_blank" rel="noopener noreferrer">LinkedIn</a>
      </div>
    </div>

    <div class="post-navigation">
      {% if page.lower %}
      <a class="prev" href="{{ page.lower.permalink }}">
        <span class="nav-label">← Önceki Yazı</span>
        <span class="nav-title">{{ page.lower.title }}</span>
      </a>
      {% endif %}
      
      {% if page.higher %}
      <a class="next" href="{{ page.higher.permalink }}">
        <span class="nav-label">Sonraki Yazı →</span>
        <span class="nav-title">{{ page.higher.title }}</span>
      </a>
      {% endif %}
    </div>

    <div class="comments" style="margin-top: 3rem;">
      <script src="https://giscus.app/client.js"
        data-repo="tuntii/zola"
        data-repo-id="R_kgDOL..." 
        data-category="General"
        data-category-id="DIC_kwDOL..."
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark"
        data-lang="tr"
        crossorigin="anonymous"
        async>
      </script>
    </div>
  </div>
</section>
{% endblock content %}
